---
interface Props {
  level: 'hypothesis' | 'tested' | 'proven' | 'canonical';
}

const { level } = Astro.props;

const titleCase = (str: string) =>
  str.replace(/\b\w/g, (c) => c.toUpperCase());

const levelDescriptions: Record<string, string> = {
  hypothesis: 'Untested assumption — needs validation',
  tested: 'Validated with some evidence',
  proven: 'Strong evidence, repeatable results',
  canonical: 'Institutionalized — this is how we do it',
};
---

<span class:list={['confidence-badge', `level--${level}`]} title={levelDescriptions[level]}>
  {titleCase(level)}
</span>

<style>
  .confidence-badge {
    display: inline-block;
    font-size: 0.65rem;
    font-weight: 600;
    padding: 0.15em 0.5em;
    border-radius: 3px;
    white-space: nowrap;
    line-height: 1;
  }

  .level--hypothesis {
    background: color-mix(in srgb, var(--color-hypothesis) 15%, transparent);
    color: var(--color-hypothesis);
  }

  .level--tested {
    background: color-mix(in srgb, var(--color-tested) 15%, transparent);
    color: var(--color-tested);
  }

  .level--proven {
    background: color-mix(in srgb, var(--color-proven) 15%, transparent);
    color: var(--color-proven);
  }

  .level--canonical {
    background: color-mix(in srgb, var(--color-canonical) 15%, transparent);
    color: var(--color-canonical);
  }
</style>
